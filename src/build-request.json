{
  "kind": "build_request",
  "title": "Publish the app in live mode (production)",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Switch the frontend publishing configuration from Draft Mode to Live Mode for the production build by setting the publishing environment variable to live (VITE_PUBLISHING_STATE=live) and ensuring draft-only UI elements are not shown.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "This looks great, just as envisioned! Let's publish live"
        ]
      },
      "acceptanceCriteria": [
        "When built with VITE_PUBLISHING_STATE=live, the app runs in live mode (publishingState resolves to 'live').",
        "The Draft indicator badge is not rendered anywhere in live mode.",
        "When built with VITE_PUBLISHING_STATE=draft, the Draft indicator badge still appears (no regression to draft behavior)."
      ]
    },
    {
      "id": "REQ-2",
      "text": "Ensure the robots meta policy behaves correctly in Live Mode so search engines can index the site: in live mode set robots to \"index, follow\"; in draft/maintenance set robots to \"noindex, nofollow\".",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Let's publish live"
        ]
      },
      "acceptanceCriteria": [
        "In live mode, the rendered <meta name=\"robots\"> content is \"index, follow\".",
        "In draft mode, the rendered <meta name=\"robots\"> content is \"noindex, nofollow\".",
        "In maintenance mode, the rendered <meta name=\"robots\"> content is \"noindex, nofollow\"."
      ]
    },
    {
      "id": "REQ-3",
      "text": "Add/adjust frontend environment configuration files/documentation so it is straightforward to publish live (e.g., provide a live env configuration alongside the existing draft env configuration) without requiring code changes.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Let's publish live"
        ]
      },
      "acceptanceCriteria": [
        "Repository includes a clearly named live-mode env example/config (or updated publishing README instructions) that specifies VITE_PUBLISHING_STATE=live.",
        "The existing draft env configuration remains available and unchanged for draft deployments."
      ]
    }
  ],
  "constraints": [
    "Do not modify files under frontend/src/components/ui (read-only).",
    "Do not modify immutable hook files (frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useInternetIdentity.tsx, frontend/src/hooks/useActor.ts, frontend/src/main.tsx).",
    "Keep backend as a single Motoko actor; no new backend services or external databases."
  ],
  "nonGoals": [
    "Adding new gameplay features or changing Solitaire rules.",
    "Implementing new authentication providers beyond Internet Identity.",
    "Introducing real-time features (WebSockets/chat) or external integrations."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  },
  "userProfileUpdate": {
    "goalsToAdd": [],
    "goalsToRemove": [],
    "preferencesToAdd": [],
    "preferencesToRemove": [],
    "miscToAdd": [],
    "miscToRemove": [],
    "fieldsToSet": {},
    "fieldsToDelete": []
  }
}