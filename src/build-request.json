{
  "kind": "build_request",
  "title": "Allow closing the New Game preferences dialog via the top-right X without choosing options",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-40",
      "text": "Update the \"New Game Preferences\" modal dialog so it can be dismissed via a top-right \"X\" close control (and standard dialog dismissal like ESC / clicking outside, if supported by the dialog component) without requiring the user to select any options or click \"Start Game\".",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Allow for user closure of open boxes via the upper-right X without selecting any options"
        ]
      },
      "acceptanceCriteria": [
        "When the New Game Preferences dialog is open, an upper-right X close button is visible and clickable.",
        "Clicking the X closes the dialog and does not start a new game.",
        "Clicking the X closes the dialog and does not persist/update any preferences (timer enabled, move tracking enabled, ask again).",
        "After closing via X, the game remains in its prior state (no reset/deal triggered)."
      ]
    },
    {
      "id": "REQ-41",
      "text": "Wire the New Game Preferences dialog to support controlled open/close behavior from the parent page (so the dialog can close when the user clicks the top-right X), and ensure the dialog's option state resets appropriately on reopen based on the current default preference props.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-4"
        ],
        "quotes": [
          "Allow for user closure of open boxes via the upper-right X without selecting any options"
        ]
      },
      "acceptanceCriteria": [
        "The parent page can close the New Game Preferences dialog when the user dismisses it (e.g., via an onOpenChange callback).",
        "Re-opening the New Game Preferences dialog shows option values initialized from the latest provided defaults (not stale values from a previous open).",
        "Closing the dialog via X/dismiss does not call the confirm/start callback."
      ]
    }
  ],
  "constraints": [
    "Do not edit files under frontend/src/components/ui (shadcn UI components are read-only and must be composed/used as-is).",
    "Keep all user-facing text in English."
  ],
  "nonGoals": [
    "Do not change Klondike gameplay rules, move validation, timer logic, move counter logic, or leaderboard storage/behavior.",
    "Do not add new settings options beyond enabling dismissal/close behavior for the existing modal."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}