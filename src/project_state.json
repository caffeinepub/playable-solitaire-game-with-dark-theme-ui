{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 25,
  "summary": "Build a simple playable solitaire game deployed to the user's personal canister, including a dark theme UI.",
  "architectural_notes": [
    "Drag-and-drop should validate drop targets; if drop is not on a valid stack location, the dragged card/run must revert to its pre-drag position/state.",
    "Foundation (upper four slots) stacked/overlapped rendering must preserve correct z-index/positioning and draggable top-card visibility when moving cards; moving a stacked foundation card should not unmount or visually hide it.",
    "Consider a rules/UI mode where once a card is placed into a foundation slot it becomes locked (non-draggable/non-interactive) to prevent move-outs and avoid the foundation disappearing-card issue.",
    "Dragging a tableau stack/run (or a card with cards underneath) and dropping onto a valid stack location must correctly transfer the run; no cards should disappear. Ensure drag/drop move logic and rendering preserve card identity and pile membership for multi-card moves.",
    "Define a \"move\" as a successful drag-and-drop that results in a valid state change; do not count simple clicks/taps or stock-to-waste draws / deck cycling as moves.",
    "Add per-playthrough stats persistence: record completion time and move count at game end and store in two separate ranked lists (time asc, moves asc), likely persisted in canister storage across sessions."
  ],
  "known_issues": [
    "Bug: Dragging some cards/runs and releasing them outside a valid drop target can leave them not stacked and not reverted to their original location.",
    "Bug: Moving a card from the upper four foundation slots after cards are visually stacked/overlapped can cause the dragged/moved card to disappear entirely.",
    "Bug: Dragging a stack/run (or a card with subsequent cards underneath) onto an otherwise valid stackable tableau location can cause the dragged card(s) to disappear instead of being placed."
  ],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-create-a-single-page-klondike-solitaire-game-ui-that-is-immediately-playable-in-the-browser-including-tableau-foundation-stock-waste-and-a-visible-card-back-front-design",
      "title": "Create a single-page Klondike Solitaire game UI that is immediately playable in the browser, including tableau, foundation, stock, waste, and a visible card back/front design.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-core-klondike-solitaire-rules-and-interactions-deal-a-standard-52-card-deck-into-the-tableau-1-7-with-top-card-face-up-allow-drawing-from-stock-to-waste-allow-moving-cards-piles-between-tableau-according-to-alternating-color-and-descending-rank-and-allow-moving-cards-to-foundation-by-ascending-rank-and-matching-suit",
      "title": "Implement core Klondike Solitaire rules and interactions: deal a standard 52-card deck into the tableau (1..7 with top card face-up), allow drawing from stock to waste, allow moving cards/piles between tableau according to alternating color and descending rank, and allow moving cards to foundation by ascending rank and matching suit.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-add-basic-game-controls-new-game-undo-at-least-one-step-undo-and-an-optional-hint-that-highlights-a-valid-move-without-auto-playing-it",
      "title": "Add basic game controls: New Game, Undo (at least one-step undo), and an optional Hint that highlights a valid move without auto-playing it.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-provide-clear-win-complete-detection-all-foundations-to-king-and-display-a-win-state-with-an-option-to-start-a-new-game",
      "title": "Provide clear win/complete detection (all foundations to King) and display a win state with an option to start a new game.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-a-coherent-dark-theme-visual-style-across-the-entire-ui-using-a-consistent-palette-typography-spacing-and-component-styling-avoid-blue-purple-as-the-primary-accents",
      "title": "Implement a coherent dark theme visual style across the entire UI, using a consistent palette, typography, spacing, and component styling (avoid blue/purple as the primary accents).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-solitaire-game-layout-is-responsive-and-usable-on-common-desktop-and-mobile-viewport-sizes-including-touch-friendly-interactions-for-moving-cards",
      "title": "Ensure the Solitaire game layout is responsive and usable on common desktop and mobile viewport sizes, including touch-friendly interactions for moving cards.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-change-the-waste-pile-ui-so-that-when-drawing-from-stock-newly-drawn-cards-visually-stack-overlap-on-top-of-previous-waste-cards-instead-of-causing-the-waste-pile-to-grow-downward-as-more-cards-are-drawn-the-topmost-most-recently-drawn-waste-card-must-remain-the-interactive-card-for-selection-moves-and-hint-highlighting",
      "title": "Change the waste pile UI so that when drawing from stock, newly drawn cards visually stack/overlap on top of previous waste cards (instead of causing the waste pile to grow downward as more cards are drawn). The topmost (most recently drawn) waste card must remain the interactive card for selection, moves, and hint highlighting.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    },
    {
      "id": "feature-refine-the-waste-pile-visual-stacking-so-the-horizontal-overlap-offset-is-capped-to-a-maximum-of-1-space-newly-drawn-waste-cards-should-appear-essentially-in-the-same-position-and-visually-cover-the-previous-waste-card-no-growing-horizontal-fan-the-topmost-most-recently-drawn-waste-card-must-remain-the-only-interactive-hoverable-clickable-card-for-selection-moves-and-hint-highlighting",
      "title": "Refine the waste pile visual stacking so the horizontal overlap offset is capped to a maximum of 1 space: newly drawn waste cards should appear essentially in the same position and visually cover the previous waste card (no growing horizontal fan). The topmost (most recently drawn) waste card must remain the only interactive/hoverable/clickable card for selection, moves, and hint highlighting.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-add-click-and-drag-drag-and-drop-interactions-so-players-can-move-cards-and-valid-face-up-runs-by-dragging-from-the-waste-or-tableau-and-dropping-onto-a-tableau-pile-using-the-existing-klondike-rule-descending-rank-with-alternating-red-black-colors-suit-is-irrelevant-for-tableau-stacking",
      "title": "Add click-and-drag (drag-and-drop) interactions so players can move cards (and valid face-up runs) by dragging from the waste or tableau and dropping onto a tableau pile, using the existing Klondike rule: descending rank with alternating red/black colors (suit is irrelevant for tableau stacking).",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-add-click-and-drag-drag-and-drop-interactions-so-players-can-move-a-single-card-by-dragging-from-the-waste-tableau-or-foundation-and-dropping-onto-one-of-the-four-foundation-piles-using-the-existing-klondike-rule-same-suit-only-ascending-rank-starting-from-ace-color-alternation-is-irrelevant-for-foundation-stacking",
      "title": "Add click-and-drag (drag-and-drop) interactions so players can move a single card by dragging from the waste, tableau, or foundation and dropping onto one of the four foundation piles, using the existing Klondike rule: same suit only, ascending rank starting from Ace (color alternation is irrelevant for foundation stacking).",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-adjust-the-tableau-7-piles-horizontal-layout-so-the-seven-tableau-stacks-are-spaced-outward-horizontally-to-match-the-spacing-alignment-of-the-four-foundation-suit-slots-above-while-remaining-responsive-on-smaller-viewports",
      "title": "Adjust the tableau (7 piles) horizontal layout so the seven tableau stacks are spaced outward horizontally to match the spacing/alignment of the four foundation (suit) slots above, while remaining responsive on smaller viewports.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-change-the-foundation-pile-visual-stacking-so-that-when-a-correctly-ascending-suit-card-is-added-to-a-foundation-the-newly-placed-card-visually-covers-overlaps-the-previous-lower-card-no-visible-fanned-vertical-growth-of-the-foundation-pile-only-the-topmost-foundation-card-should-remain-the-primary-interactive-draggable-card",
      "title": "Change the foundation pile visual stacking so that when a correctly ascending suit card is added to a foundation, the newly placed card visually covers/overlaps the previous lower card (no visible fanned/vertical growth of the foundation pile). Only the topmost foundation card should remain the primary interactive/draggable card.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-that-when-a-card-waste-foundation-or-a-face-up-run-tableau-is-dragged-but-not-dropped-onto-a-valid-drop-target-the-game-state-and-ui-fully-revert-to-the-pre-drag-state-i-e-the-dragged-cards-remain-in-their-original-pile-and-do-not-appear-stranded-misaligned",
      "title": "Ensure that when a card (waste/foundation) or a face-up run (tableau) is dragged but not dropped onto a valid drop target, the game state and UI fully revert to the pre-drag state (i.e., the dragged cards remain in their original pile and do not appear stranded/misaligned).",
      "reqIds": [
        "REQ-13"
      ],
      "version": 1
    },
    {
      "id": "feature-when-a-drag-is-dropped-onto-a-tableau-foundation-drop-zone-but-the-move-is-invalid-by-klondike-rules-treat-it-as-a-canceled-drop-do-not-change-state-and-ensure-the-dragged-card-s-visually-remain-in-their-original-pile-no-disappearing-or-stranded-rendering",
      "title": "When a drag is dropped onto a tableau/foundation drop zone but the move is invalid by Klondike rules, treat it as a canceled drop: do not change state, and ensure the dragged card(s) visually remain in their original pile (no disappearing or stranded rendering).",
      "reqIds": [
        "REQ-14"
      ],
      "version": 1
    },
    {
      "id": "feature-investigate-and-fix-the-bug-where-dragging-moving-the-top-card-from-one-of-the-four-foundation-piles-after-the-foundation-has-multiple-cards-stacked-overlapped-can-cause-the-dragged-moved-card-to-disappear-from-the-ui",
      "title": "Investigate and fix the bug where dragging/moving the top card from one of the four foundation piles (after the foundation has multiple cards stacked/overlapped) can cause the dragged/moved card to disappear from the UI.",
      "reqIds": [
        "REQ-15"
      ],
      "version": 1
    },
    {
      "id": "feature-harden-foundation-pile-rendering-so-react-reconciliation-cannot-incorrectly-unmount-lose-the-rendered-card-when-the-foundation-top-card-changes-during-a-move-e-g-ensure-stable-card-identity-based-keys-for-rendered-cards-where-applicable-including-foundation-top-card-rendering",
      "title": "Harden foundation pile rendering so React reconciliation cannot incorrectly unmount/lose the rendered card when the foundation top card changes during a move (e.g., ensure stable, card-identity-based keys for rendered cards where applicable, including foundation top-card rendering).",
      "reqIds": [
        "REQ-16"
      ],
      "version": 1
    },
    {
      "id": "feature-make-all-cards-in-the-four-foundation-piles-upper-slots-permanently-non-interactive-locked-players-must-not-be-able-to-select-click-or-drag-cards-from-foundations-after-they-are-placed-there-while-still-allowing-valid-drops-onto-foundations-from-the-waste-tableau",
      "title": "Make all cards in the four foundation piles (upper slots) permanently non-interactive (“locked”): players must not be able to select, click, or drag cards from foundations after they are placed there, while still allowing valid drops onto foundations from the waste/tableau.",
      "reqIds": [
        "REQ-17"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-small-visual-locked-affordance-state-to-foundation-top-cards-to-make-it-clear-they-cannot-be-interacted-with-without-changing-the-overall-dark-theme-and-ensure-hover-active-styling-does-not-imply-interactivity-for-foundation-cards",
      "title": "Add a small visual “locked” affordance/state to foundation top cards to make it clear they cannot be interacted with (without changing the overall dark theme), and ensure hover/active styling does not imply interactivity for foundation cards.",
      "reqIds": [
        "REQ-18"
      ],
      "version": 1
    },
    {
      "id": "feature-fix-the-drag-and-drop-behavior-so-that-dragging-a-tableau-run-a-face-up-card-with-subsequent-cards-underneath-it-can-be-dropped-onto-a-valid-tableau-stack-and-the-moving-run-is-correctly-placed-without-any-cards-disappearing",
      "title": "Fix the drag-and-drop behavior so that dragging a tableau run (a face-up card with subsequent cards underneath it) can be dropped onto a valid tableau stack, and the moving run is correctly placed without any cards disappearing.",
      "reqIds": [
        "REQ-19"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-small-game-timer-ui-element-positioned-in-the-upper-right-corner-of-the-game-page-that-displays-elapsed-time-in-hours-minutes-and-full-seconds-only-formatted-as-hh-mm-ss-the-timer-must-start-at-00-00-00-when-a-new-game-begins-and-update-once-per-second",
      "title": "Add a small game timer UI element positioned in the upper-right corner of the game page that displays elapsed time in hours, minutes, and full seconds only (formatted as HH:MM:SS). The timer must start at 00:00:00 when a new game begins and update once per second.",
      "reqIds": [
        "REQ-21"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-move-counter-to-the-solitaire-game-state-that-increments-only-when-a-drag-and-drop-action-results-in-a-valid-successful-move-i-e-the-dropped-card-s-are-actually-placed-onto-a-tableau-or-foundation-pile-and-the-game-state-changes-the-move-counter-must-not-increment-for-click-based-moves-selections-and-must-not-increment-for-stock-to-waste-draws-or-stock-resets-shuffles",
      "title": "Add a move counter to the Solitaire game state that increments only when a drag-and-drop action results in a valid, successful move (i.e., the dropped card(s) are actually placed onto a tableau or foundation pile and the game state changes). The move counter must not increment for click-based moves/selections, and must not increment for stock-to-waste draws or stock resets/shuffles.",
      "reqIds": [
        "REQ-22"
      ],
      "version": 1
    },
    {
      "id": "feature-display-the-current-move-counter-in-the-ui-as-english-text-e-g-moves-0-in-a-location-consistent-with-the-existing-timer-ui-visible-on-desktop-near-the-upper-right-header-area-and-visible-on-mobile-in-the-controls-timer-area",
      "title": "Display the current move counter in the UI as English text (e.g., \"Moves: 0\") in a location consistent with the existing timer UI: visible on desktop near the upper-right header area and visible on mobile in the controls/timer area.",
      "reqIds": [
        "REQ-23"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-move-counter-behaves-sensibly-with-undo-and-new-game-new-game-resets-the-counter-to-0-and-undo-restores-the-prior-move-counter-value-for-the-undone-action-i-e-undoing-a-counted-drag-and-drop-move-decreases-restores-the-counter-accordingly-while-undoing-a-draw-does-not-affect-the-move-counter",
      "title": "Ensure the move counter behaves sensibly with Undo and New Game: New Game resets the counter to 0, and Undo restores the prior move counter value for the undone action (i.e., undoing a counted drag-and-drop move decreases/restores the counter accordingly, while undoing a draw does not affect the move counter).",
      "reqIds": [
        "REQ-24"
      ],
      "version": 1
    },
    {
      "id": "feature-record-a-completed-playthrough-result-when-and-only-when-the-user-wins-a-game-capturing-both-a-elapsed-time-in-seconds-from-the-game-timer-and-b-the-current-drag-move-counter-value-for-that-playthrough",
      "title": "Record a completed-playthrough result when (and only when) the user wins a game, capturing both (a) elapsed time in seconds from the game timer and (b) the current drag-move counter value for that playthrough.",
      "reqIds": [
        "REQ-25"
      ],
      "version": 1
    },
    {
      "id": "feature-persist-the-history-of-recorded-playthrough-results-on-the-client-so-the-results-remain-available-across-page-reloads-e-g-using-localstorage-and-load-the-persisted-results-on-app-start",
      "title": "Persist the history of recorded playthrough results on the client so the results remain available across page reloads (e.g., using localStorage), and load the persisted results on app start.",
      "reqIds": [
        "REQ-26"
      ],
      "version": 1
    },
    {
      "id": "feature-compile-and-display-two-separate-ranked-lists-derived-from-the-recorded-playthrough-results-1-best-times-ranked-by-lower-completion-time-first-and-2-best-moves-ranked-by-fewer-moves-first-each-list-entry-must-show-both-the-primary-metric-and-the-other-metric-for-that-same-playthrough-e-g-a-time-ranked-entry-also-shows-its-moves",
      "title": "Compile and display two separate ranked lists derived from the recorded playthrough results: (1) Best Times ranked by lower completion time first, and (2) Best Moves ranked by fewer moves first. Each list entry must show both the primary metric and the other metric for that same playthrough (e.g., a time-ranked entry also shows its moves).",
      "reqIds": [
        "REQ-27"
      ],
      "version": 1
    },
    {
      "id": "feature-update-the-win-ui-so-that-when-the-win-dialog-is-shown-it-includes-the-current-playthrough-s-completion-time-and-moves-plus-the-two-ranked-lists-best-times-and-best-moves-in-the-same-dialog-or-immediately-adjacent-ui-section-using-english-labels",
      "title": "Update the win UI so that, when the win dialog is shown, it includes the current playthrough’s completion time and moves, plus the two ranked lists (Best Times and Best Moves) in the same dialog or immediately adjacent UI section, using English labels.",
      "reqIds": [
        "REQ-28"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a playable solitaire game deployed in the user's personal canister",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-2",
      "summary": "Include a dark theme for the solitaire game's UI",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Change stock-to-waste draw behavior so newly drawn cards stack/overlap on top of previous waste cards instead of dropping downward each draw",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Refine waste pile stacking so the overlap offset is capped at 1 space and each newly drawn waste card covers the previous card (minimal/near-zero visible spacing)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-5",
      "summary": "Enable click-and-drag (drag-and-drop) card movement for tableau stacking (alternating red/black, descending rank) and foundation stacking (same suit, ascending from Ace)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Adjust layout spacing so the 7 tableau stacks are spaced outward horizontally to match the spacing of the foundation (suit) slots above",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Change foundation pile visual stacking so newly placed ascending suit cards cover/overlap the previous lower card (instead of showing a fanned stack)",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-8",
      "summary": "Make foundation (upper four slots) cards non-interactive once stacked there (locked), to avoid interaction/move-outs that can trigger disappearing behavior",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-10",
      "summary": "Ensure drag cancellation and invalid drops never strand or hide cards when dragging tableau runs: if a tableau run is dropped outside a drop zone or onto a tableau drop zone where the move is invalid, the UI and game state must fully revert to the pre-drag state with no missing cards.",
      "reqIds": [
        "REQ-20"
      ],
      "status": "pending"
    },
    {
      "id": "AR-11",
      "summary": "Add a small game timer in the upper-right corner showing hours, minutes, and full seconds",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-12",
      "summary": "Add a move counter that increments only on successful drag-and-drop moves (exclude clicks and stock/deck shuffles) and display it in the UI",
      "reqIds": [],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Track and store per-playthrough results in two separate ranked categories: best (lowest) completion time and best (fewest) moves, and maintain/display a compiled list for each category",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "2d",
  "projectName": "Playable Solitaire game with dark theme UI",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}